#!/bin/bash

TARGET_DIR="$HOME/Pictures/screenshots"
mkdir -p "$TARGET_DIR"
TIMESTAMP=$(date '+%Y-%m-%d-%H-%M-%S')
FILENAME="$TARGET_DIR/$TIMESTAMP-screenshot.png"
ROFI_THEME="$HOME/.config/rofi/themes/scrotmenu_c.rasi"
OPT_SCREEN_SAVE='󰍹'
OPT_AREA_SAVE='󰆞'

CHOSEN=$(printf "$OPT_SCREEN_SAVE\n$OPT_AREA_SAVE" | rofi -dmenu -theme $ROFI_THEME)

case "$CHOSEN" in
  "$OPT_SCREEN_SAVE")
    maim "$FILENAME"
    xclip -selection clipboard -t image/png < "$FILENAME"
    notify-send -u low -i camera "󰍹 Screenshot Saved & Copied" "Path: $FILENAME"
    ;;

  "$OPT_AREA_SAVE")
    maim -s "$FILENAME"
    if [ -f "$FILENAME" ]; then
        xclip -selection clipboard -t image/png < "$FILENAME"
        notify-send -u low -i camera "󰆞 Area Saved & Copied" "Path: $FILENAME"
    fi
    ;;

  *)
    exit 1
    ;;
esac
